<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>å¤§ä¼šæŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ </title>
<style>
  body { font-family: sans-serif; }
  .tabs { display: flex; margin-bottom: 10px; }
  .tab-button {
    flex: 1;
    padding: 10px;
    cursor: pointer;
    border: 1px solid #ccc;
    background: #f5f5f5;
  }
  .tab-button.active { background: #4caf50; color: #fff; font-weight: bold; }
  .form-section { margin: 15px 0; }
  .winner-block { margin: 8px 0; padding: 8px; border: 1px solid #ccc; border-radius: 6px; background: #fafafa; }
  label { display: inline-block; width: 80px; }
  input, select { margin: 5px 0; }
  .container { display: flex; gap: 20px; }
  #preview { width: 100%; height: 300px; }
  .error { color: red; font-weight: bold; }
</style>
</head>
<body>

<h1>å¤§ä¼šæŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ </h1>

<div class="tabs">
  <button class="tab-button active" data-title="pokemon">ãƒã‚±ãƒ¢ãƒ³</button>
  <button class="tab-button" data-title="yugioh">éŠæˆ¯ç‹</button>
  <button class="tab-button" data-title="onepiece">ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹</button>
</div>

<div class="container">
  <!-- å·¦ï¼šãƒ•ã‚©ãƒ¼ãƒ  -->
  <div style="flex:1;">
    <div class="form-section">
      <label for="eventName">å¤§ä¼šå:</label>
      <select id="eventName"></select>
    </div>

    <div class="form-section">
      <label for="participants">å‚åŠ äººæ•°:</label>
      <input type="number" id="participants" min="1" placeholder="ä¾‹: 54">
    </div>

    <div class="form-section">
      <h3>å…¥è³è€…æƒ…å ±</h3>
      <div class="winner-block">
        <label>å…¥è³è€…1:</label>
        <input type="text" id="winner1" placeholder="åå‰">
        <input type="text" id="deck1" placeholder="ãƒ‡ãƒƒã‚­å">
      </div>
      <div class="winner-block">
        <label>å…¥è³è€…2:</label>
        <input type="text" id="winner2" placeholder="åå‰">
        <input type="text" id="deck2" placeholder="ãƒ‡ãƒƒã‚­å">
      </div>
      <div class="winner-block">
        <label>å…¥è³è€…3:</label>
        <input type="text" id="winner3" placeholder="åå‰">
        <input type="text" id="deck3" placeholder="ãƒ‡ãƒƒã‚­å">
      </div>
      <div class="winner-block">
        <label>å…¥è³è€…4:</label>
        <input type="text" id="winner4" placeholder="åå‰">
        <input type="text" id="deck4" placeholder="ãƒ‡ãƒƒã‚­å">
      </div>
    </div>
  </div>

  <!-- å³ï¼šãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ -->
  <div style="flex:1;">
    <h3>æ–‡ç« ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h3>
    <div id="preview" style="white-space: pre-wrap;"></div>
  </div>
</div>

<script>
  const eventsByTitle = {
    pokemon: ["ã‚¸ãƒ ãƒãƒˆãƒ«", "ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼ã‚ºãƒªãƒ¼ã‚°", "ã‚¨ã‚¯ã‚¹ãƒˆãƒ©ãƒãƒˆãƒ«"],
    yugioh: ["1ãƒ‡ãƒ¥ã‚¨ãƒ«æˆ¦", "ãƒãƒƒãƒæˆ¦"],
    onepiece: ["äº¤æµä¼š", "å…¬å¼å¤§ä¼š"]
  };

  const eventSelect = document.getElementById("eventName");
  const tabButtons = document.querySelectorAll(".tab-button");
  const participantsInput = document.getElementById("participants");
  const winners = [
    {name: document.getElementById("winner1"), deck: document.getElementById("deck1")},
    {name: document.getElementById("winner2"), deck: document.getElementById("deck2")},
    {name: document.getElementById("winner3"), deck: document.getElementById("deck3")},
    {name: document.getElementById("winner4"), deck: document.getElementById("deck4")},
  ];
  const previewDiv = document.getElementById("preview");

  function updateEventOptions(title) {
    eventSelect.innerHTML = "";
    eventsByTitle[title].forEach(event => {
      const option = document.createElement("option");
      option.textContent = event;
      eventSelect.appendChild(option);
    });
  }

  // åˆæœŸè¡¨ç¤º
  updateEventOptions("pokemon");

  tabButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      tabButtons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      const title = btn.getAttribute("data-title");
      updateEventOptions(title);
      updatePreview();
    });
  });

  // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°é–¢æ•°
  function updatePreview() {
    const titleTab = document.querySelector(".tab-button.active").textContent;
    const eventName = eventSelect.value || "<span class='error'>æœªå…¥åŠ›</span>";
    const participants = participantsInput.value || "<span class='error'>æœªå…¥åŠ›</span>";

    let text = `æœ¬æ—¥ã® #${titleTab} #${eventName} ã¯\n`;
    text += `${participants} åæ§˜ã«ã¦é–‹å‚¬\n\n`;

    winners.forEach((w,i)=>{
      const name = w.name.value || "<span class='error'>åå‰æœªå…¥åŠ›</span>";
      const deck = w.deck.value || "<span class='error'>ãƒ‡ãƒƒã‚­åæœªå…¥åŠ›</span>";
      if(w.name.value || w.deck.value){
        text += `å„ªå‹ã¯ ğŸ† ${name} ã•ã‚“\nã€#${deck}ã€‘\n\n`;
      }
    });

    text += "ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼\n";
    text += "å¤§ä¼šã¯æ¯æ—¥é–‹å‚¬ä¸­ï¼\næ¬¡å›ã‚‚ãœã²ã”å‚åŠ ãã ã•ã„ï¼";

    previewDiv.innerHTML = text;
  }

  // å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²
  participantsInput.addEventListener("input", updatePreview);
  eventSelect.addEventListener("change", updatePreview);
  winners.forEach(w=>{
    w.name.addEventListener("input", updatePreview);
    w.deck.addEventListener("input", updatePreview);
  });

  // åˆæœŸè¡¨ç¤º
  updatePreview();
</script>
</body>
</html>
